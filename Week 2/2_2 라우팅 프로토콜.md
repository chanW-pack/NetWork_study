# 라우팅 프로토콜

- 라우팅 프토토콜, 라우티드 프로토콜 종류
    
    라우팅 프로토콜 : RIP, IGRP, OSPF, EIGRP
    
    라우티드 프로토콜 : TCP/IP, IPX, Apple Talk
    
 ![Untitled](https://user-images.githubusercontent.com/84123877/177038956-ac29fd2e-0f7e-45dc-bab8-d7fd04b11c45.png)
    

**동적 라우팅 프로토콜(Dynamic Routing Protocol)**은 운영자가 일일이 경로를 지정하지 않아도 라우터가 스스로 길을 찾아가는 프로토콜이다.

동적 라우팅 프로토콜 중에서 가장 구성이 쉬우면서도 가장 단순한 RIP 라우팅 프로토콜과 나머지 두 프로토콜에 대해 학습하겠다.

## 디스턴스 벡터, 링크 스테이트 알고리즘

디스턴스 벡터와 링크 스테이트 알고리즘

<디스턴스 벡터> - RIP, IGRP

- 거리와 방향만을 유지하며 이웃 라우터와 주기적으로 라우팅 테이블을 교환

[장점]

- 라우터의 메모리 절약
- 구성이 간단

[단점]

- 주기적으로 라우팅 테이블 교환으로 인한 트래픽 낭비
- 최대 홉 카운트 제한으로 인한 대규모 네트워크 부적합

<링크 스테이트> - OSPF

- 라우터가 목적지까지의 모든 경로를 알고 있음

[장점]

- 링크 변화에 대한 인지가 빠름
- 테이블 교환 주기가 길어 트래픽이 적음

[단점]

- 메모리의 소모가 많음
- CPU의 부담이 큼

## RIP

- **RIP(Routing Information Protocol)**
    - 표준 라우팅 프로토콜
    - 다이나믹 라우팅 프로토콜
    - 내부용 라우팅 프로토콜(IGP)
    - 디스턴스 벡터 프로토콜 (거리와 방향으로 길을 찾아가는 프로토콜)
    - RIP 라우팅 프로토콜에서 라우터가 좋은 길을 결정하는 기준이 되는 요소는 **홉(hop)카운트**이다.
    - RIP 라우팅 프로토콜에서 최대한 갈 수 있는 홉 카운트의 거리는 **15개까지**이다.
    - RIP 디폴트 라우팅 **업데이트 주기는 30초**이다.
    - 라우터의 메모리를 적게 사용하는 장점이 있다.
    - 하지만 오로지 홉 카운트에만 의존하기 때문에 회선의 속도가 느려도 그 쪽으로 보낸다.
    - 15개 이상 갈 수 없어 대규모보단 소규모 네트워크에 적합하다.
    - 어떤 목적지로 가는 경로가 4개 있는데 모두 홉카운트가 없다면 라우터는 이 4곳으로 패킷을 분산해 보낸다. 이를 로드밸런싱 이라 한다.

현재까지 가장 많이 사용되는 프로토콜 중 하나이며 네트워크의 구성 계층은 없고 평면적인 프로토콜이다. 특히 LAN 구간에서 사용되는 프로토콜이다.

- **Hop Count** : RIP에서 사용하는 Metric으로 도달할 목적지의 거리를 측정하기 위해 사용된다. 여기서 말하는 거리는 **실제 거리가 아닌 거치는 Gateway의 수**를 말한다. 최대 Hop count를 15로 제한하는 특징을 가지며, 라우터를 통과할 때마다 1씩 증가한다.

- **Distance Vector** 알고리즘 : 각각의 라우터는 일정한 주기로 인접한 라우터에 라우팅 정보를 전달하며 라우팅 정보의 변화가 없을 때에도 라우터는 업데이트된 정보를 전달한다.

![Untitled 1](https://user-images.githubusercontent.com/84123877/177038958-9d32517a-8d12-4b3d-bcbe-f6c0bbbf9342.png)


> Distance Vector 알고리즘의 예
> 

- 매 30초마다 각 int로 라우팅 정보 전달함
- UDP 세그먼트에 Encapsulation되어 사용됨
- RIP 메세지 송수신용 UDP 포트 : RIPv1 과 v2는 520번, RIPng는 521번을 사용

### RIP 실습

- 실습
    
    
 ![Untitled 2](https://user-images.githubusercontent.com/84123877/177038959-4f22b876-e99d-4641-9918-b5139dc4831a.png)
    
    위 사진과 같은 네트워크 구성에서 실습하도록 하겠다.
    

---



## **VLSM**

라우터의 각 인터페이스 별로 서브넷 마스크가 전부 제각각인 경우 

여러가지 종류의 서브넷 마스크를 VLSM이라고 한다.

즉, **하나의 네트워크를 효율적으로 사용하기 위해서 여러 단위의 네트워크로 분할하여 사용하는 기능이다.**

RIP이나 IGRP 라우팅 프로토콜은 VLSM 을 지원하지 않는다.

- 이유는 라우팅 테이블을 주고 받을 때 서브넷 마스크 정보를 포함하지 않기 때문이다.

<aside>
💡 스태틱 라우팅 프로토콜이나 EIGRP, OSPF 같은 라우팅 프로토콜을 사용해야 한다.

</aside>

## IGRP(Interior Gateway Routing Protocol)

- RIP과 마찬가지로 라우팅 프로토콜
- 다이나믹 프로토콜
- 내부용 라우팅 프로토콜 (IGP)
- **디스턴스 벡터 알고리즘**
- 표준 프로토콜이 아니라 시스코에서 만들어낸 프로토콜이라 **시스코 라우터에서만 사용 가능**
- 홉카운트로만 경로를 설정하지 않고 다음 **다섯가지 방법**으로 결정
    1. Bandwidth(대역폭) : 속도, 단위는 킬로비트 KBps
    2. Delay(지연) : 경로를 통해서 도착할 때까지의 지연되는 시간. 원래 회선 상에 아무 트래픽이 없을 때를 가정하고 제공되는 수치임
    3. Reliability(신뢰성) : 케이블이나 전용선 등 전송 매체를 통해 패킷을 보낼 때 생기는 에러율을 나타내는 수치. Keepalive 라는 것을 이용해서 측정
    4. Load(부하, 하중) : 출발지와 목적지 상의 경로에 어느 정도의 부하가 걸리고 있는지를 측정
    5. MTU(Maxinum Transmission Unit) : 경로의 쵀대 전송 유닛의 크기. 바이트로 표시한다.

- 90초에 한 번씩 라우팅 테이블의 업데이트가 발생
- 최대 홉 카운트가 255로 커다란 네트워크에 적용해도 문제 없음
- **VLSM을 지원하지 못한다는 단점**과 시스코 라우터에서만 적용된다는 단점

---

## Secondary

- 한 라우터의 인터페이스에 여러 개의 주소 범위를 줄 때 사용하는 명령이 Secondary 이다.
- 두 주소 범위 간의 통신은 라우터를 거쳐서 일어난다.

---

## OSPF 라우팅 프로토콜
OSPF 라우팅 프로토콜은 다음 페이지에서 상세히 다뤄보도록 하겠다.
